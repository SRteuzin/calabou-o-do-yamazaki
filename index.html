<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quem sou eu? — Yamazaki</title>
<style>
  /* ===== Reset / Base ===== */
  :root{
    --bg1:#071429; --bg2:#0f2447;
    --accent1:#7b5cff; --accent2:#00e5ff;
    --muted:rgba(255,255,255,0.75);
    --card: rgba(255,255,255,0.03);
    --glass: rgba(255,255,255,0.04);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    color:#eef2ff;
    -webkit-font-smoothing:antialiased;
    display:flex;align-items:center;justify-content:center;padding:24px;
  }
  .app {
    width:100%; max-width:1000px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:16px; padding:22px; position:relative;
    box-shadow: 0 18px 60px rgba(0,0,0,0.6);
    overflow:hidden;
  }

  /* decorative */
  .glow-top{ position:absolute; right:-160px; top:-140px; width:420px; height:420px;
    background: radial-gradient(circle at 20% 20%, rgba(123,92,255,0.12), transparent 20%),
                radial-gradient(circle at 80% 80%, rgba(0,229,255,0.08), transparent 20%);
    filter: blur(36px); transform:rotate(12deg); pointer-events:none;
  }
  .glow-bottom{ position:absolute; left:-140px; bottom:-120px; width:380px; height:380px;
    background: radial-gradient(circle at 20% 20%, rgba(255,92,150,0.06), transparent 25%),
                radial-gradient(circle at 80% 80%, rgba(155,255,200,0.04), transparent 20%);
    filter: blur(36px); pointer-events:none;
  }

  header { display:flex; align-items:center; gap:18px; margin-bottom:12px; }
  .logo {
    width:78px; height:78px; border-radius:12px; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(135deg,var(--accent1),var(--accent2));
    box-shadow: 0 10px 30px rgba(123,92,255,0.15);
    transform:rotate(-6deg);
  }
  .logo svg{ width:44px; height:44px; opacity:0.95; }

  .title h1{ font-size:26px; letter-spacing:0.4px; color:#f3f7ff; }
  .title p{ font-size:13px; color:var(--muted); margin-top:6px; }

  .card{ background:var(--card); border-radius:12px; padding:18px; margin-top:6px; border:1px solid rgba(255,255,255,0.02); }

  .intro { color:var(--muted); margin-bottom:12px; }
  .btn {
    background: linear-gradient(90deg,var(--accent1),var(--accent2));
    color:#041223; padding:12px 18px; border-radius:12px; border:none; cursor:pointer; font-weight:700;
    box-shadow: 0 8px 30px rgba(0,0,0,0.35);
  }
  .btn:hover{ transform:translateY(-4px); }

  /* Quiz area */
  #quizArea{ display:none; margin-top:12px; }
  #question{ font-size:20px; color:#dffaff; margin-bottom:14px; text-shadow:0 6px 30px rgba(0,229,255,0.06); }
  .options{ display:flex; flex-direction:column; gap:12px; align-items:center; }

  .option {
    width:100%; max-width:640px; display:flex; align-items:center; justify-content:space-between;
    padding:12px 16px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
    border:1px solid rgba(255,255,255,0.03); cursor:pointer; font-weight:700; color:#f6f9ff;
    transition: transform .12s ease, box-shadow .12s ease;
    box-shadow: 0 6px 20px rgba(0,0,0,0.45);
  }
  .option:hover{ transform:translateY(-6px); box-shadow: 0 12px 40px rgba(0,0,0,0.6); }

  .progress{ height:10px; width:100%; background:rgba(255,255,255,0.03); border-radius:10px; overflow:hidden; margin-top:14px; }
  .progress > span{ display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--accent2),var(--accent1)); transition:width .42s ease; }

  /* result area */
  #resultArea{ display:none; margin-top:12px; }
  #resultArea h2{ font-size:22px; color:#ffd166; margin-bottom:8px; text-shadow:0 4px 24px rgba(255,209,102,0.06); }
  .secretCard{ background: linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.008)); padding:14px; border-radius:10px; border:1px solid rgba(255,255,255,0.02); text-align:left; color:var(--muted); line-height:1.5; }

  .friends{ display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; }
  .friend { background: rgba(255,255,255,0.02); padding:10px 12px; border-radius:10px; min-width:200px; max-width:320px; border:1px solid rgba(255,255,255,0.02); }

  .playerWrap{ display:flex; gap:12px; margin-top:12px; align-items:flex-start; flex-wrap:wrap; }
  .audioBox{ width:100%; max-width:560px; padding:10px; border-radius:10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.02); box-shadow: 0 10px 30px rgba(0,0,0,0.45); }
  .miniList{ display:flex; flex-wrap:wrap; gap:8px; }

  .small { font-size:13px; color:var(--muted); }

  footer { margin-top:16px; text-align:center; color:var(--muted); font-size:13px; }

  /* confetti canvas */
  canvas#confetti { position:fixed; left:0; top:0; pointer-events:none; z-index:9999; width:100%; height:100%; }

  @media (max-width:820px){
    .option{ max-width:100% }
    .playerWrap{ flex-direction:column; }
  }
</style>
</head>
<body>
  <div class="app" role="main" aria-labelledby="mainTitle">
    <div class="glow-top" aria-hidden="true"></div>
    <div class="glow-bottom" aria-hidden="true"></div>

    <header>
      <div class="logo" aria-hidden="true">
        <!-- simple icon -->
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1" y="1" width="22" height="22" rx="5" fill="white" opacity="0.06"/><path d="M6 12h12" stroke="white" stroke-opacity="0.8" stroke-width="1.4" stroke-linecap="round"/><path d="M6 8h12" stroke="white" stroke-opacity="0.6" stroke-width="1.2" stroke-linecap="round"/></svg>
      </div>
      <div class="title">
        <h1 id="mainTitle">Quem sou eu? — Yamazaki</h1>
        <p>Responda o quiz para desbloquear minha página pessoal — Vocaloid lover, lives e história.</p>
      </div>
      <div style="margin-left:auto">
        <button class="btn" id="startBtn">Começar</button>
      </div>
    </header>

    <section class="card">
      <div id="intro" class="intro">
        Você verá 5 perguntas sobre mim — responda uma por vez. Se acertar pelo menos <strong>3 de 5</strong>, o site libera meu perfil completo com áudio e confetti.
        <div class="progress" aria-hidden="true" style="margin-top:8px"><span id="progBar"></span></div>
      </div>

      <!-- QUIZ -->
      <div id="quizArea" aria-hidden="true">
        <div id="question" aria-live="polite">Pergunta</div>
        <div class="options" id="optionsContainer" role="list">
          <!-- JS gera as opções -->
        </div>
      </div>

      <!-- RESULT -->
      <div id="resultArea" aria-hidden="true">
        <h2 id="resultTitle">Resultado</h2>
        <div class="secretCard" id="secretCard" role="article">
          <!-- conteudo secreto preenchido por JS -->
        </div>

        <div class="playerWrap" id="playerWrap" style="display:none">
          <div class="audioBox" id="audioBox">
            <div style="font-weight:800;color:#eaffff">Áudio (apenas som)</div>
            <div id="audioControls" style="margin-top:8px" class="small">Se o áudio não tocar automaticamente, clique play no player abaixo.</div>
            <!-- fallback visible controls (JS vai inserir botão play/pause custom) -->
            <div id="audioUI" style="margin-top:8px"></div>
          </div>

          <div style="flex:1;min-width:220px">
            <div style="font-weight:700;margin-bottom:8px">Meus amigos</div>
            <div class="friends" id="friendsList">
              <!-- JS preenche -->
            </div>
          </div>
        </div>

        <div style="margin-top:12px">
          <button class="btn" id="retryBtn" style="display:none">Tentar de novo</button>
          <button class="btn" id="copyBtn" style="background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.03);display:none">Copiar link (demo)</button>
        </div>

      </div>
    </section>

    <footer>
      Dica: para trocar a música/vídeo edite a variável <code>videoLinks</code> no script.
    </footer>
  </div>

  <canvas id="confetti"></canvas>

  <!-- YouTube API (dinâmico) -->
  <script>
/* ===========================
   CONFIG EDITÁVEL
   =========================== */

/* links de vídeo do YouTube (qualquer formato aceitável)
   - O primeiro item será o áudio padrão que toca no fundo após desbloquear.
*/
const videoLinks = [
  "https://youtu.be/NRQRC_0ZQ00?si=NQp-N_mB6b9b6vZ3"
];

/* Perfil do Yamazaki — edite se quiser */
const profile = {
  displayName: "Yamazaki",
  alias: "iamazake",
  age: 19,
  job: "Garçom",
  loves: ["Hatsune Miku", "Megurine Luka", "Kaito", "Ado"],
  adoFavorites: ["Rockstar", "Aishite", "Usseewa"],
  dream: "Morar no Japão num cantinho tranquilo",
  longIntro: `Eu sou ${"Yamazaki"}, tenho 19 anos e trabalho como garçom. Sou profundamente ligado ao universo Vocaloid — principalmente Hatsune Miku — e também sou muito fã das músicas da Ado. Descobri Vocaloid entre 2018-2020, comecei escutando músicas sem saber que eram Vocaloid, e quando descobri, tudo mudou. Durante a pandemia, a música e esse universo me ajudaram quando eu tava passando por momentos bem difíceis. Hoje faço lives no YouTube, compartilho música e converso com amigos online.`
};

/* Lista de amigos e descrições conforme pedido */
const friendsData = [
  { name: "Epic", desc: "O cara que mais amassei no Fortnite." },
  { name: "Front", desc: "Um cara legal que conversei poucas vezes, mas achei super da hora." },
  { name: "Pedro49Gamer", desc: "O cara que tem as melhores músicas do Spotify." },
  { name: "Jesus de Patinete", desc: "Um cara super aleatório, meu amigo, trabalha comigo." },
  { name: "Consta", desc: "Uma portuguesa, gente boa pra caralho." },
  { name: "Clover", desc: "NOZES" }
];

/* Perguntas do quiz — cada item: pergunta, array de opções, índice correto (0-based) */
const questions = [
  { q: "Qual é o meu nick online?", a: ["iamazake", "Yamazaki", "yamazaki21"], correct: 0 },
  { q: "Qual Vocaloid é meu favorito principal?", a: ["Hatsune Miku", "Megurine Luka", "Kaito"], correct: 0 },
  { q: "Qual carro clássico eu gosto?", a: ["Honda Silvia", "Nissan Skyline", "Toyota Supra"], correct: 0 },
  { q: "Qual música da Ado eu mais curto?", a: ["Rockstar", "Usseewa", "Aishite"], correct: 0 }, // aceita-se Rockstar como principal
  { q: "Qual país eu sonho morar?", a: ["Japão", "Estados Unidos", "Alemanha"], correct: 0 }
];

const requiredCorrect = 3; // mínimo pra desbloquear

/* ===========================
   VARIÁVEIS INTERNAS
   =========================== */
let current = 0;
let score = 0;
let userAnswers = [];
let player = null; // YouTube player
let youtubeReady = false;
let ytPlayerId = null;

/* DOM refs */
const startBtn = document.getElementById('startBtn');
const quizArea = document.getElementById('quizArea');
const optionsContainer = document.getElementById('optionsContainer');
const questionEl = document.getElementById('question');
const progBar = document.getElementById('progBar');
const resultArea = document.getElementById('resultArea');
const secretCard = document.getElementById('secretCard');
const playerWrap = document.getElementById('playerWrap');
const audioUI = document.getElementById('audioUI');
const friendsList = document.getElementById('friendsList');
const retryBtn = document.getElementById('retryBtn');
const copyBtn = document.getElementById('copyBtn');
const confettiCanvas = document.getElementById('confetti');

/* ===========================
   FUNÇÕES DO QUIZ
   =========================== */
startBtn.addEventListener('click', () => {
  startBtn.disabled = true;
  startBtn.style.transform = "translateY(2px)";
  // inicializa o quiz (isso conta como interação para autoplay)
  startQuiz();
});

function startQuiz(){
  document.getElementById('intro').style.display = 'none';
  quizArea.style.display = 'block';
  current = 0; score = 0; userAnswers = [];
  updateProgress();
  showQuestion(current);
}

/* render da pergunta */
function showQuestion(i){
  const q = questions[i];
  questionEl.textContent = q.q;
  optionsContainer.innerHTML = '';
  q.a.forEach((opt, idx) => {
    const btn = document.createElement('button');
    btn.className = 'option';
    btn.innerHTML = `<span>${opt}</span><small style="opacity:0.85;color:var(--muted)"> Selecionar</small>`;
    btn.onclick = () => chooseOption(idx);
    optionsContainer.appendChild(btn);
  });
}

/* ao selecionar opção (não mostra resposta imediata) */
function chooseOption(choiceIdx){
  const correct = (choiceIdx === questions[current].correct);
  userAnswers.push({ q: current, choice: choiceIdx, correct });
  if(correct) score++;
  current++;
  updateProgress();
  if(current < questions.length){
    showQuestion(current);
  } else {
    finishQuiz();
  }
}

function updateProgress(){
  const percent = Math.round((userAnswers.length / questions.length) * 100);
  progBar.style.width = percent + '%';
}

/* finalizar quiz */
function finishQuiz(){
  quizArea.style.display = 'none';
  resultArea.style.display = 'block';
  const passed = (score >= requiredCorrect);
  document.getElementById('resultTitle').textContent = passed ? "Parabéns! Você me conhece bem!" : "Quase lá — tente de novo!";
  buildSecret(passed);
  populateFriends();
  if(passed){
    // exibe player e tenta iniciar áudio (a interação do usuário já ocorreu)
    playerWrap.style.display = 'flex';
    initYouTubeAudio();
    startConfetti({duration:4500, particleCount:200});
    retryBtn.style.display = 'inline-block';
    copyBtn.style.display = 'inline-block';
  } else {
    // exibe botão de retry
    retryBtn.style.display = 'inline-block';
    copyBtn.style.display = 'inline-block';
  }
}

/* monta o HTML do perfil detalhado */
function buildSecret(unlocked){
  if(!unlocked){
    secretCard.innerHTML = `<strong>Você acertou ${score} de ${questions.length}.</strong>
      <p class="small" style="margin-top:8px">Tente novamente para desbloquear o conteúdo completo sobre mim.</p>`;
    return;
  }
  // texto longo, detalhado — sem medo, tudo que combinamos
  const html = `
    <strong style="font-size:16px">Olá — eu sou ${profile.displayName} (aka ${profile.alias}).</strong>
    <p style="margin-top:10px">${profile.longIntro}</p>

    <div style="margin-top:10px">
      <strong>Minhas paixões musicais</strong>
      <p class="small" style="margin-top:6px">Sou fã da Ado (entre minhas preferidas estão: ${profile.adoFavorites.join(', ')}). Também amo músicas da Hatsune Miku e do universo Vocaloid — isso inclui artistas e remixes que me marcaram durante anos.</p>
    </div>

    <div style="margin-top:10px">
      <strong>Como descobri Vocaloid</strong>
      <p class="small" style="margin-top:6px">Lá por 2018-2020 eu ouvi várias músicas sem saber que eram Vocaloid — parecia uma voz humana. Quando descobri que era Vocaloid (principalmente Hatsune Miku), me apaixonei. Durante a pandemia, isso me ajudou muito — a música me manteve de pé em momentos que eu estava bem mal. Foi por isso que criei um apego enorme a esse universo.</p>
    </div>

    <div style="margin-top:10px">
      <strong>Vida e sonhos</strong>
      <ul class="small" style="margin-top:6px">
        <li>Idade: ${profile.age} anos</li>
        <li>Trabalho: ${profile.job}</li>
        <li>Sonho: ${profile.dream}</li>
      </ul>
    </div>

    <div style="margin-top:10px">
      <strong>Lives & redes</strong>
      <p class="small" style="margin-top:6px">Faço lives no YouTube (compartilho música e papo). Instagram e YouTube são minhas principais redes — deixe seu follow se curtir o conteúdo.</p>
      <p class="small" style="margin-top:6px"><strong>Links:</strong>
        <br><a href="https://www.youtube.com" target="_blank" style="color:var(--accent2)">YouTube</a> •
        <a href="https://www.instagram.com" target="_blank" style="color:var(--accent2)">Instagram</a>
      </p>
    </div>
  `;
  secretCard.innerHTML = html;
}

/* popula a lista de amigos */
function populateFriends(){
  friendsList.innerHTML = '';
  friendsData.forEach(f=>{
    const el = document.createElement('div');
    el.className = 'friend';
    el.innerHTML = `<strong>${f.name}</strong><div class="small" style="margin-top:6px">${f.desc}</div>`;
    friendsList.appendChild(el);
  });
}

/* reinicia o quiz */
retryBtn.addEventListener('click', () => {
  // limpar estado e voltar ao início
  resultArea.style.display = 'none';
  document.getElementById('intro').style.display = 'block';
  document.getElementById('progBar').style.width = '0%';
  playerWrap.style.display = 'none';
  retryBtn.style.display = 'none';
  copyBtn.style.display = 'none';
  // stop any playing
  stopYouTube();
  current = 0; score = 0; userAnswers = [];
});

/* copiar link (demo) */
copyBtn.addEventListener('click', async () => {
  try {
    await navigator.clipboard.writeText(location.href);
    alert('Link copiado (modo demo).');
  } catch(e){
    alert('Não foi possível copiar o link.');
  }
});

/* ===========================
   YOUTUBE AUDIO (sem mostrar o vídeo)
   - usa IFrame API e cria o player com 0x0, fazendo play do áudio.
   - funciona melhor depois da interação (já ocorre quando usuário clicou START).
   =========================== */
function parseYouTubeId(url){
  try{
    const u = new URL(url);
    if(u.hostname.includes('youtu.be')) return u.pathname.slice(1).split('?')[0];
    if(u.searchParams.has('v')) return u.searchParams.get('v').split('?')[0];
    if(u.pathname.includes('/embed/')) return u.pathname.split('/embed/')[1].split('?')[0];
    // fallback
    return u.pathname.split('/').pop().split('?')[0];
  }catch(e){
    // fallback naive parse
    const m = url.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/);
    return m ? m[1] : null;
  }
}

/* Carrega API do YouTube dinamicamente */
(function loadYouTubeAPI(){
  if(window.YT && window.YT.Player){ youtubeReady = true; return; }
  const tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  document.head.appendChild(tag);
})();

/* cria player para o primeiro link, escondido (0x0) */
function initYouTubeAudio(){
  if(!videoLinks || videoLinks.length === 0) return;
  const id = parseYouTubeId(videoLinks[0]);
  if(!id) return;

  // se API ainda não pronta, espera
  if(typeof YT === 'undefined' || !YT.Player){
    // aguarde e tente novamente rapidinho
    const tries = 0;
    const waitFor = setInterval(()=> {
      if(window.YT && window.YT.Player){
        clearInterval(waitFor);
        createHiddenPlayer(id);
      }
    }, 200);
  } else {
    createHiddenPlayer(id);
  }
}

function createHiddenPlayer(videoId){
  // se já existe, troque
  if(player){
    try{ player.loadVideoById(videoId); player.playVideo(); }catch(e){}
    return;
  }

  // cria div escondida pro player
  const div = document.createElement('div');
  div.id = 'yt-audio-player';
  div.style.width = '0px';
  div.style.height = '0px';
  div.style.overflow = 'hidden';
  div.style.opacity = '0';
  div.style.position = 'absolute';
  div.style.left = '-9999px';
  document.body.appendChild(div);

  player = new YT.Player('yt-audio-player', {
    height: '0', width: '0',
    videoId: videoId,
    playerVars: {
      autoplay: 1,
      controls: 0,
      modestbranding: 1,
      rel: 0,
      loop: 1,
      playlist: videoId
    },
    events: {
      onReady: (e) => {
        try {
          // definir volume (100 por padrão)
          e.target.setVolume(85);
          e.target.playVideo();
          // construir UI de play/pause simples
          buildAudioUI();
        } catch(err){}
      },
      onStateChange: (e) => {
        // se bloqueado, o usuário poderá usar o botão play manual
      }
    }
  });
}

function stopYouTube(){
  try{ if(player && player.stopVideo) player.stopVideo(); }catch(e){}
}

/* constrói UI de controle de áudio visível */
function buildAudioUI(){
  audioUI.innerHTML = '';
  const playBtn = document.createElement('button');
  playBtn.textContent = "Play / Pause";
  playBtn.className = 'btn';
  playBtn.onclick = () => {
    if(!player) return;
    const state = player.getPlayerState();
    // states: -1 unstarted, 0 ended, 1 playing, 2 paused
    if(state === 1) player.pauseVideo();
    else player.playVideo();
  };
  audioUI.appendChild(playBtn);

  // volume slider
  const volWrap = document.createElement('div');
  volWrap.style.marginTop = '8px';
  volWrap.innerHTML = `<span class="small">Volume</span>`;
  const volInput = document.createElement('input');
  volInput.type = 'range';
  volInput.min = 0; volInput.max = 100; volInput.value = 85;
  volInput.style.width = '100%';
  volInput.oninput = (e)=> { if(player && player.setVolume) player.setVolume(e.target.value); };
  volWrap.appendChild(volInput);
  audioUI.appendChild(volWrap);
}

/* ===========================
   CONFETTI (simples, leve)
   =========================== */
function startConfetti(opts = {}){
  const canvas = confettiCanvas;
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const duration = opts.duration || 4000;
  const particleCount = opts.particleCount || 150;
  const colors = ["#7b5cff","#00e5ff","#ff66cc","#ffd166","#7bffea","#ff82d8"];

  const pieces = [];
  function rand(min,max){ return Math.random()*(max-min)+min; }
  for(let i=0;i<particleCount;i++){
    pieces.push({
      x: rand(0,canvas.width),
      y: rand(-canvas.height,0),
      w: rand(6,14),
      h: rand(8,18),
      color: colors[Math.floor(Math.random()*colors.length)],
      vx: rand(-2,2),
      vy: rand(2,6),
      tilt: rand(-0.2,0.2)
    });
  }

  let start = null;
  function frame(ts){
    if(!start) start = ts;
    const elapsed = ts - start;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p => {
      ctx.save();
      ctx.fillStyle = p.color;
      ctx.translate(p.x, p.y);
      ctx.rotate(p.tilt);
      ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
      ctx.restore();
      p.x += p.vx;
      p.y += p.vy;
      p.tilt += 0.02;
      if(p.y > canvas.height + 50){ p.y = -40; p.x = rand(0,canvas.width); }
    });
    if(elapsed < duration) requestAnimationFrame(frame);
    else ctx.clearRect(0,0,canvas.width,canvas.height);
  }
  requestAnimationFrame(frame);
  window.addEventListener('resize', ()=>{ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }, {passive:true});
}

/* ===========================
   Inicialização (preenchimentos e proteção)
   =========================== */
function init(){
  // preencher lista de friends invisível até o final
  // (será preenchida ao final do quiz)
  // Também prevenir multiple starts
  document.getElementById('progBar').style.width = '0%';
}
init();

/* ===========================
   Nota: se quiser trocar links, altere `videoLinks` no topo.
   =========================== */
  </script>
</body>
</html>
